# Promotion process

1. Separate repositories for each environment
* ProvingGround
* Learning
* Engineering
* Platform

2. Branch structure in each repository to support promotion process
* main branch - to serve as a baseline for each environment
* Cluster specific branches - to integrate with Terraform Cloud workspaces (one branch per workspace). E.g:
  * EastUS01
  * EastUS02
  * WestUS01
* promotion branches - to serve for promotion delivery and acceptance. E.g.
  * from_provinggrounds (in Learning repository) - to accept approved changes from ProvingGrounds environment repository. Changes will be submitted as pull request to the main branch as a stop gate.
  * to_engineering (in Learning repository) - to promote approved changes to Engineering environment repository

3. Development process
Developers work off of main branch in ProvingGround repository. Changes are to be submitted as pull requests to the main branch in ProvingGround repository.

Administrators/Ops - to review and approve/decline pull requests in main branch in ProvingGround repository.

Other repositories/branches are not to be touched by developers 

TBD: enforce via branch protection/actions, allow direct changes? - how to merge/backport

4. Promotion process
All promotion activities to be done via GitHub workflows.

Pull requests to be used as stop gates in the promotion process.

Administrators/Ops - to review and approve/decline pull requests generated by GitHub workflows.

TBD: Need to review pr rejection process - how to promote back to lower environments (manually or another set of GitHub workflows)

5. Promotion process details
Example based on two environments:
* ProvingGrounds
* Learning

Activities:
* Operations/SRE to create issues in ProvingGround repo
* Developers clone/fork main branch of ProvingGround repo
* Developers make changes and submit as pull requests to main branch of ProvingGround repo optionally linking pull requests to issues
* Developers free to make additional commits to pull request as required by reviewer
* Operations review pull requests, request changes, approve or decline pull requests.
* Github workflow (on push to main branch of ProvingGround repo) - create pull request to the following branches:
  * cluster specific branches  
